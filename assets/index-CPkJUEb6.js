import{e as u,R as M,m as j}from"./monaco-Bulsg0Ag.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();class f{static get CHECKED_TYPE_ROOT(){return 1}static get CHECKED_TYPE_NODE(){return 2}#e;#t;#r=3;#i;#n=16;#g=2;#a=0;#o=15;#d=10;#m=-1;#u="";#s=[];#f=[];#c;#l=void 0;#h=void 0;#p=void 0;#v=void 0;#y=void 0;#w=-1;#E=!0;constructor(e,t){this.#e=e,this.#e.classList.add("genTree"),this.#e.classList.add("pl");const n=document.createElement("div");n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.width="100%",n.style.height="100%",n.style.border="0px",n.style.padding="0px",n.style.margin="0px",n.style.backgroundColor="rgba(0, 0, 0, 0)",n.classList.add("topLayer"),this.#e.appendChild(n),this.#t=n,this.#c=null,this.options=t||{},this.#i=[],this.#a=this.#M(),this.#u=this.#N(),this.#e.addEventListener("scroll",s=>{s.preventDefault(),requestAnimationFrame(this.#D.bind(this))})}set autoOpen(e){this.#E=e}get autoOpen(){return this.#E}set options(e){e&&"rowRender"in e&&(this.#l=e.rowRender),e&&"checkedType"in e&&(this.#r=e.checkedType);const t=n=>{n.preventDefault(),this.#D()};e&&"resizer"in e&&(e.resizer===!0?window.addEventListener("resize",t):e.resizer===!1&&window.removeEventListener("resize",t)),e&&"fontSize"in e&&(this.#n=e.fontSize),e&&"rowHeight"in e&&(this.#m=e.rowHeight)}set fontSize(e){this.#n=e|0,this.#i&&(this.#a=this.#M(),this.setData(this.#i))}set rowHeight(e){this.#m=e}set indent(e){this.#o=e,this.update()}setDataRow(e,t){const n=t.id,s=f.#C(n,this.#i);s&&(Object.keys(s).forEach(r=>{delete s[r]}),Object.keys(t).forEach(r=>{s[r]=t[r]}));const a=this.#s.findIndex(r=>r.id===n);if(a!==-1){const r=this.#s[a];Object.keys(r).forEach(l=>{delete r[l]}),Object.keys(t).forEach(l=>{r[l]=t[l]});const i=document.getElementById(e);if(i&&i.parentNode){if(this.#l===void 0)return;const l=this.#l(r);i.parentNode.replaceChild(l,i)}}}static#C(e,t){for(const n of t){if(n.id===e)return n;if(n.child){const s=this.#C(e,n.child);if(s)return s}}return null}findDataById(e){const t=f.#C(e,this.#i);return t?{...t}:null}#x(e){if(this.#w!=e){const t=this.#t.getElementsByClassName("hover");for(let s=0;s<t.length;s++)t[s].classList.remove("hover");const n=document.getElementById(this.#u+"_"+e);n&&n.classList.add("hover")}this.#w=e}#M(){const e=document.createElement("span");e.textContent="あ",e.style.fontSize=this.#n+"px",this.#e.appendChild(e);const t=this.#b(e);return this.#e.removeChild(e),t[0].rect.height}#b(e){if(e.nodeType==e.TEXT_NODE){const t=e.ownerDocument.createRange();t.selectNodeContents(e);let n=0;const s=t.endOffset,a=[];for(;n<s;)t.setStart(e,n),t.setEnd(e,n+1|0),n=n+1|0,a.push({character:t.toString(),rect:t.getBoundingClientRect()});return t.detach(),a}else{const t=[],n=e.childNodes.length;for(let s=0;s<(n|0);s=s+1|0)t.push(this.#b(e.childNodes[s|0]));return Array.prototype.concat.apply([],t)}}#N(e){let t=1e3;return e&&(t=e),new Date().getTime().toString(16)+Math.floor(t*Math.random()).toString(16)}#L(){return this.#m===-1?this.#a+this.#g*2:this.#m}setSelected(e){let t=-1;const n=this.#s.length;for(let r=0;r<(n|0);r=r+1|0)if(this.#s[r].id===e){t=r;break}if(t==-1)return;let s=0;if(this.#s[t].type=="root"&&(s=s+f.CHECKED_TYPE_ROOT),this.#s[t].type=="node"&&(s=s+f.CHECKED_TYPE_NODE),(s&this.#r)!=s)return;this.#c!=null&&(this.#c.selected=!1);for(let r=0;r<this.#t.childElementCount;r=r+1|0){const i=this.#t.children[r].id.split("_")[1];if("selected"in this.#s[i]){delete this.#s[i].selected;const l=document.getElementById(this.#u+"_"+i);l&&l.classList.remove("selected");break}}this.#s[t].selected=!0,this.#c=this.#s[t];const a=document.getElementById(this.#u+"_"+t);a&&a.classList.add("selected")}setData(e){this.#i=e,this.update()}editNodeArray(e){for(let t=0;t<this.#s.length;t++){const n=this.#s[t];e(n)}}update(){this.#f=[],this.#k(this.#i),this.#s=this.#f,this.#I(),this.#A()}#A(){Number(this.#e.style.width.replace("px",""));const e=this.#L();let t=this.#s.length*e|0;const n=Number(this.#e.style.height.replace("px",""));t<n&&(t=n),this.#t.style.height=t+"px"}#k(e,t=0){if(!e)return;const n=e.length|0;for(let s=0;s<(n|0);s=s+1|0){const a=e[s],r=a;r.level=t,this.#f.push(r),a.type==="root"&&a.open&&"open"in a&&"child"in a&&this.#k(a.child,t+1|0)}}#I(){for(;this.#t.firstChild;)this.#t.removeChild(this.#t.firstChild);this.#D()}#D(){const e=this.#T(),t=[],n=[],s=this.#t.childElementCount;for(let i=0;i<s;i=i+1|0){const l=Number(this.#t.children[i].id.split("_")[1]);l>=e.hideTopIdx&&l<e.hideBottomIdx||t.push(this.#t.children[i|0])}for(let i=0;i<t.length;i=i+1|0){const l=t[i];l.parentNode&&l.parentNode.removeChild(l)}const a=document.createDocumentFragment(),r=e.hideBottomIdx;for(let i=e.hideTopIdx;i<=(r|0);i=i+1|0)if(document.getElementById(this.#u+"_"+i)==null){const l=this.#R(i);n.push(this.#s[i]),this.#v&&this.#v(this.#s[i]),a.appendChild(l)}this.#t.appendChild(a),this.#y&&this.#y(n)}#T(){const e=this.#e.scrollTop|0,t=this.#e.offsetHeight+e,n=this.#L(),s=Math.floor(e/n),a=Math.floor(t/n);let r=s-3|0,i=a+3|0;return r<0&&(r=0),i>this.#s.length-1&&(i=this.#s.length-1),{viewTopIdx:s,viewBottomIdx:a,hideTopIdx:r,hideBottomIdx:i}}#R(e){const t=this.#L(),n=document.createElement("div");n.style.height=t+"px",n.style.top=e*t+"px",n.id=this.#u+"_"+e,n.classList.add("row");const s=this.#s[e];"level"in s||console.log("not level data="+s),"selected"in s&&s.selected===!0&&n.classList.add("selected");const a=document.createElement("div");a.classList.add("indent"),a.style.width=this.#d+this.#o*(s.level+1)+"px",n.appendChild(a);const r=document.createElement("div");if(r.classList.add("row-content"),n.appendChild(r),this.#l==null){const i=document.createElement("span");i.classList.add("rowtext"),i.style.fontSize=this.#n+"px",i.style.lineHeight=t+"px",i.textContent=s.name,r.appendChild(i)}else r.appendChild(this.#l(s));if(s.type==="root"&&("open"in s&&s.open?a.classList.add("icon-open"):a.classList.add("icon-close")),"iconClass"in s&&s.iconClass){const i=s.iconClass.split(" ");for(let l=0;l<i.length;l++){const h=i[l];a.classList.add(h)}}return n.addEventListener("mousemove",i=>{i.stopPropagation(),i.preventDefault(),this.#x(e)}),n.addEventListener("click",i=>{i.stopPropagation(),i.preventDefault(),this.#h&&this.#h(i.currentTarget,s),this.setSelected(s.id),this.#E&&s.type==="root"&&(s.open=!s.open,this.setData(this.#i),this.#w=-1,this.#x(e)),this.#p&&this.#p(i.currentTarget,s)}),n}onRenderRowEvent(e){this.#v=e}onRenderEvent(e){this.#y=e}onClickEvent(e){this.#h=e}onClickedEvent(e){this.#p=e}}const N=o=>new Date().getTime().toString(16)+Math.floor(1e3*Math.random()).toString(16),U={types:[{description:"Text Files",accept:{"text/*":[".txt",".md",".js",".ts",".json"]}}],multiple:!1};class g{constructor(){}static async openRootDir(){try{return await window.showDirectoryPicker()}catch{return null}}static async getlist(e){const t=[];for await(const[n,s]of e.entries())t.push({key:n,value:s});return t}static async createFolder(e,t){return await t.getDirectoryHandle(e,{create:!0})}static async createFile(e,t){return await t.getFileHandle(e,{create:!0})}static async updateFile(e,t){const n=await e.createWritable();await n.write(t),await n.close()}static async readFile(e){try{const t=await e.getFile(),n=await t.text(),s=await t.name,a=this.getFileExtension(s);return{contents:n,filename:s,ext:a}}catch(t){throw console.error("ファイルの読み込みに失敗しました:",t),t}}static async saveFile(e,t,n=!1){try{let s;if(n||!e){const a={types:[{description:"Text Files",accept:{"text/*":[".txt",".md",".js",".ts",".json"]}}],suggestedName:e?(await e.getFile()).name:"untitled.txt"};s=await window.showSaveFilePicker(a)}else s=e;return this.updateFile(s,t),s}catch(s){throw s.name==="AbortError"?console.log("保存がキャンセルされました"):console.error("ファイルの保存に失敗しました:",s),s}}static getFileExtension(e){try{return e.split(".").pop()}catch{return""}}static async openFile(e=null){try{const t=e||U,[n]=await window.showOpenFilePicker(t);return n?{handle:n}:{handle:null}}catch(t){throw console.error("ファイルを開けませんでした:",t),t}}}class W{_monaco;_editor;_session;_eofClass;_eolClass;constructor(e){this._monaco=e.monaco,this._editor=e.currentEditor,this._session=e.currentModel,this._eofClass=e.eofClassName,this._eolClass=e.eolClassName}getDecorations(){const e=this._editor.getVisibleRanges();if(!e||e.length===0)return[];const t=this._session,n=t.getLineCount(),s=3,a=/\r\n|\n|\r/g,r=[];for(const i of e){const l=Math.max(1,i.startLineNumber-s),h=Math.min(n,i.endLineNumber+s),_=t.getOffsetAt(new this._monaco.Position(l,1)),D=t.getLineLength(h);t.getOffsetAt(new this._monaco.Position(h,D+1));const P=t.getValueInRange(new this._monaco.Range(l,1,h,D+1));let x;for(a.lastIndex=0;(x=a.exec(P))!==null;){const O=_+x.index,p=t.getPositionAt(O),z=this._eolClass;r.push({range:new this._monaco.Range(p.lineNumber,p.column,p.lineNumber,p.column),options:{afterContentClassName:z}})}const m=t.getFullModelRange();h===m.endLineNumber&&r.push({range:new this._monaco.Range(m.endLineNumber,m.endColumn,m.endLineNumber,m.endColumn),options:{afterContentClassName:this._eofClass}})}return r}}const V={automaticLayout:!0,theme:"vs",minimap:{enabled:!1},mouseWheelZoom:!1,fontSize:14,wordWrap:"off",lineNumbers:"on",renderWhitespace:"selection",autoClosingQuotes:"languageDefined",autoClosingBrackets:"languageDefined",language:"markdown",maxTokenizationLineLength:1e3},$={},X=o=>o&&{js:"javascript",ts:"typescript",json:"json",html:"html",css:"css",md:"markdown",py:"python",java:"java",cpp:"cpp",c:"c",cs:"csharp",rb:"ruby",php:"php",xml:"xml",yml:"yaml"}[o.toLowerCase().replace(".","")]||"plaintext";class K{#e;#t;#r;#i;#n;#g=0;#a=!0;#o={};#d={};#m=[];#u=[];#s;#f;#c={};#l=null;constructor(e,t,n="txt",s={}){this.#i=e,this.#t=t,this.#r=n||s.language||"plaintext",this.#c=s,(s===void 0||Object.keys(s).length===0)&&(this.#c=V),this.#e=u.create(e,this.#c,{locale:"ja"}),this.#n=u.createModel(this.#t,this.#r),this.#e.setModel(this.#n),this.initialize(this.#t,!0)}get editorInstance(){return this.#e}get textContent(){return this.#t=this.#n.getValue(),this.#t}setSession(e){this.#n=e}focus(){return this.#e.focus(),this.getPosition()}getPosition(){return this.#e.getPosition()}setLanguageFromExt(e){const t=X(e);this.setLanguage(t)}get language(){return this.#r}setLanguage(e){this.#r=e,u.setModelLanguage(this.#n,this.#r),u.defineTheme("myCustomTheme",{base:"vs",inherit:!0,rules:[],colors:$}),u.setTheme("myCustomTheme")}initialize(e="",t=!1){this.#t=e,this.#e&&!t&&(this.#n=u.createModel(this.#t,this.#r),this.#e.setModel(this.#n)),this.#n.setValue(this.#t),console.log(`editor initialize: ${this.#t.length} characters loaded.`),this.#e.focus(),this.#g=this.#n.getAlternativeVersionId(),this.#a=!0,this.#n.onDidChangeContent(n=>{this.#d.eolDecorations&&this.updateDecorations(),this.#o.onDidChangeContent&&(this.#g===this.#n.getAlternativeVersionId()?(this.#a=!0,this.#o.onDidChangeContent(!0)):this.#a&&(this.#a=!1,this.#o.onDidChangeContent(!1))),this.#f&&this.#f(this.textContent)}),this.#e.onDidChangeCursorPosition(n=>{this.#h(),this.#o.onDidChangeCursorPosition&&this.#o.onDidChangeCursorPosition(n)}),this.#e.onDidFocusEditorText(n=>{this.#o.onDidFocusEditorText&&this.#o.onDidFocusEditorText(n)}),this.#e.onDidScrollChange(n=>{this.#h();const s=this.#e.getVisibleRanges();s.length>0&&s[0].startLineNumber,this.#o.onDidScrollChange&&this.#o.onDidScrollChange(n)}),this.#e.onDidLayoutChange(n=>{this.#h()}),window.addEventListener("resize",this.#p)}insertTextAtPosition(e,t,n){const s=new M(t,n,t,n);this.#e.executeEdits(null,[{range:s,text:e,forceMoveMarkers:!0}])}resetVersionState(){this.#g=this.#n.getAlternativeVersionId(),this.#a=!0}setEventHandler(e,t){this.#o[e]=t}eolDecorations(e){if(e){const t=new W({monaco:j,currentEditor:this.#e,currentModel:this.#n,eolClassName:"editorlineEnd",eofClassName:"editorEof"});this.#d.eolDecorations=t,this.#m.push(...t.getDecorations())}else delete this.#d.eolDecorations;this.updateDecorations()}updateDecorations(){const e=[];for(const t in this.#d){const n=this.#d[t];if(n){if(typeof n.getDecorations=="function"){const s=n.getDecorations();Array.isArray(s)&&e.push(...s);continue}Array.isArray(n)&&e.push(...n)}}this.#s?this.#s.set(e):this.#s=this.#e.createDecorationsCollection(e)}#h=()=>{this.#l==null&&(this.#l=window.setTimeout(()=>{this.#l=null,this.#d.eolDecorations&&this.updateDecorations()},16))};#p=()=>{this.#e.layout(),this.#h()};onTextContentChangeEvent(e){this.#f=e}#v(e,t,n){const s=new M(t,n,t,n);this.#e.executeEdits(null,[{range:s,text:e,forceMoveMarkers:!0}])}#y(e){const t=this.#e.getModel();return t===null||e<1||e>t.getLineCount()?null:t.getLineContent(e)}}let A="";const I="editor",T="editor-container",R={},Y=(o,e="")=>{const t=document.createElement("div");t.id=o,t.className=T,document.getElementById(I)?.appendChild(t);const s=new K(t,e);return R[o]=s,{container:t,editor:s}},S=()=>A,F=o=>{const e=document.getElementById(I);if(!e)return;const t=e.getElementsByClassName(`${T}`);Array.from(t).forEach(n=>{if(n.id===o){n.classList.remove("hide");const s=R[o];A=o,s.focus()}else n.classList.add("hide")})},E=o=>{const e=document.getElementById("rectLine"),t=document.getElementById("rectNumber");e.textContent=o.line.toString(),t.textContent=o.column.toString()},B=o=>{const e=document.getElementById("editorLanguage");e.textContent=o};class q{element;fMdown=this.mouseDown.bind(this);fMup=this.mouseUp.bind(this);fMmove=this.mouseMove.bind(this);fDownCallback=()=>{};fDownArgs=null;fMoveCallback=()=>{};fMoveArgs=null;fUpCallback=()=>{};fUpArgs=null;isMove=!1;constructor(e){this.isMove=!1,this.element=e,this.element.addEventListener("mousedown",this.fMdown,!1)}onDown(e,...t){this.fDownCallback=e,this.fDownArgs=t}onMove(e,...t){this.fMoveCallback=e,this.fMoveArgs=t}onUp(e,...t){this.fUpCallback=e,this.fUpArgs=t}mouseDown(e){e.preventDefault(),this.element.classList.add("drag"),document.addEventListener("mousemove",this.fMmove,!0),this.element.addEventListener("mouseup",this.fMup,!1),document.body.addEventListener("mouseup",this.fMup,!1),document.body.addEventListener("mouseleave",this.fMup,!1),this.fDownCallback&&this.fDownArgs&&this.fDownCallback(e,...this.fDownArgs)}mouseMove(e){if(e.preventDefault(),console.log("mousemove"),document.getElementsByClassName("drag")[0]!=null){const t=document.getElementsByClassName("drag")[0];this.isMove||(t.addEventListener("mouseup",this.fMup,!1),document.body.addEventListener("mouseup",this.fMup,!1),document.body.addEventListener("mouseleave",this.fMup,!1),this.isMove=!0)}else document.body.removeEventListener("mousemove",this.fMmove,!0);this.fMoveCallback&&this.fMoveArgs&&this.fMoveCallback(e,...this.fMoveArgs)}mouseUp(e){console.log("mouseUP"),e.preventDefault();const t=document.getElementsByClassName("drag")[0];document.removeEventListener("mousemove",this.fMmove,!0),document.body.removeEventListener("mouseup",this.fMup,!1),document.body.removeEventListener("mouseleave",this.fMup,!1),t.removeEventListener("mouseup",this.fMup,!1),t.classList.remove("drag"),this.fUpCallback&&this.fUpArgs&&this.fUpCallback(e,...this.fUpArgs),this.isMove=!1}removeEvent(){document.body.removeEventListener("mousemove",this.fMmove,!0)}}class d{static#e=!1;static#t=null;#r=!1;#i=null;constructor(e,t){const n={x:0,y:0},s=new q(e);s.onDown(a=>{if(d.#e||this.#r)return;const r=a;n.x=r.pageX-e.offsetLeft,n.y=r.pageY-e.offsetTop,console.log(`down pageX=${r.pageX}, offsetLeft=${e.offsetLeft}`),document.getElementById("dragMoveLayer")?.classList.remove("hide")}),s.onMove(a=>{const r=a;document.documentElement.style.setProperty(t,r.pageX+8-n.x+"px"),console.log(`event.pageX=${r.pageX}, rect.x=${n.x}`)}),s.onUp(a=>{document.getElementById("dragMoveLayer")?.classList.add("hide")})}static setAllStop(e){d.#e=e,d.#t?.(e)}static onAllStop(e){d.#t=e}stop(e){this.#r=e,this.#i?.(e)}onStop(e){this.#i=e}}N();const y={},H={},b=[];console.log("newMemo");const J=document.getElementById("sidemenu"),k=30,c=new f(J,{fontSize:14,rowHeight:k,rowRender:o=>{const e=document.createElement("div");e.classList.add("text-info-row"),e.id=`side-menu-item-${o.id}`,e.style.height=`${k}px`;const t=document.createElement("div");t.classList.add("right");const n=document.createElement("div");n.classList.add("left");const s=document.createElement("div");s.classList.add("center"),e.appendChild(n),e.appendChild(s),e.appendChild(t);let a="";o.isChanged?a+="●":a+="　";const r=document.createElement("span");r.classList.add("change-check-span"),r.textContent=a;const i=document.createTextNode(" "+o.name),l=document.createElement("span");return l.appendChild(i),n.appendChild(r),n.appendChild(l),e}});c.indent=0;let v=!1;const C={"--sidemenu-width":""},L=document.getElementById("listBorder");new d(L,"--sidemenu-width");d.onAllStop(o=>{const e=document.documentElement;if(o){const t=getComputedStyle(e).getPropertyValue("--sidemenu-width").trim();C["--sidemenu-width"]=t,e.style.setProperty("--sidemenu-width","0px"),L.classList.add("hidden")}else C["--sidemenu-width"]!==""&&e.style.setProperty("--sidemenu-width",C["--sidemenu-width"]),L.classList.remove("hidden")});const w=o=>{const e=N(),t={id:e,name:o?.ext?`${o.filename}`:"new memo",type:"node"};o.fileHandle&&(y[e]=o.fileHandle),b.push(t),c.setData(b);const s=Y(e,o.text).editor;H[e]=s,s.eolDecorations(!0);const a=o.ext?o.ext:"txt";s.setLanguageFromExt(a),B(s.language),F(e),E({line:1,column:1}),s.setEventHandler("onDidChangeCursorPosition",r=>{E({line:r.position.lineNumber,column:r.position.column})}),s.setEventHandler("onDidFocusEditorText",r=>{const i=s.getPosition();E({line:i?i.lineNumber:0,column:i?i.column:0})}),s.setEventHandler("onDidChangeContent",r=>{const i=S(),l=c.findDataById(i);l&&(l.isChanged=!r,c.setDataRow(`side-menu-item-${i}`,l))})},G=async o=>{const e=y[o]?y[o]:null,t=H[o],n=await g.saveFile(e,t.textContent);y[o]=n,t.resetVersionState();const s=c.findDataById(o);if(!s)return;s.isChanged=!1,s.name=n.name,c.setDataRow(`side-menu-item-${o}`,s);const a=g.getFileExtension(n.name);t.setLanguageFromExt(a),B(t.language)},Q=o=>{d.setAllStop(o)};w({text:""});c.onClickedEvent((o,e)=>(F(e.id),!0));document.getElementById("icon-list-toggle")?.addEventListener("click",o=>{o.preventDefault(),v=!v,Q(v);const e=document.getElementById("icon-list-toggle-img");v?e?.classList.add("toggle"):e?.classList.remove("toggle")});document.getElementById("icon-new-file")?.addEventListener("click",o=>{o.preventDefault(),w({text:""})});document.getElementById("icon-file-open")?.addEventListener("click",async o=>{o.preventDefault();const e=await g.openFile(),t=await g.readFile(e.handle);w({filename:t.filename,text:t.contents,ext:t.ext,fileHandle:e.handle})});document.getElementById("icon-save-file")?.addEventListener("click",async o=>{o.preventDefault();const e=S();G(e)});window.addEventListener("dragover",o=>{o.preventDefault()});window.addEventListener("drop",async o=>{if(o.preventDefault(),!!o.dataTransfer)for(const e of o.dataTransfer.items)if(e.kind==="file"){const n=await e.getAsFileSystemHandle(),s=await g.readFile(n);w({filename:s.filename,text:s.contents,ext:s.ext,fileHandle:n})}else e.kind});"serviceWorker"in navigator&&(navigator.serviceWorker.register("../service-worker.js").then(o=>{o.addEventListener("updatefound",()=>{const e=o.installing;e&&e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&o.waiting?.postMessage({type:"SKIP_WAITING"})})})}).catch(()=>{}),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()}));
